<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>간단한 GIF 변환기</title>
    <style>
        /* 'Paperlogy-8ExtraBold' 웹폰트 정의 */
        @font-face {
            font-family: 'Paperlogy-8ExtraBold';
            src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/2408-3@1.0/Paperlogy-8ExtraBold.woff2') format('woff2');
            font-weight: 800;
            font-style: normal;
        }

        /* 전체 컨테이너의 기본 스타일 */
        #gif-converter-container {
            font-family: 'Paperlogy-8ExtraBold', 'Segoe UI', sans-serif;
            background-color: #f4f4f8;
            text-align: center;
            padding: 40px 20px;
            color: #333;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
            box-sizing: border-box;
        }

        /* 컨테이너 내부 요소 스타일링 */
        #gif-converter-container h1 {
            font-size: 28px;
            margin-bottom: 10px;
            color: #222;
        }

        #gif-converter-container h2 {
            font-size: 16px;
            font-weight: normal;
            color: #777;
            margin-bottom: 30px;
        }

        #gif-converter-container #drop-zone {
            border: 3px dashed #ccc;
            border-radius: 15px;
            padding: 40px 20px 30px;
            background-color: #fff;
            max-width: 500px;
            margin: 0 auto 30px;
            position: relative;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        #gif-converter-container #drop-zone.dragover {
            border-color: #f44336;
            background-color: #fff7f7;
        }
        
        #gif-converter-container .main-icon {
            width: 80px;
            height: auto;
            margin-bottom: 20px;
            vertical-align: middle;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.1));
            display: block;
            margin-left: auto;
            margin-right: auto;
        }

        #gif-converter-container #file-input {
            display: none;
        }

        #gif-converter-container #file-label {
            background-color: #d32f2f;
            color: white;
            padding: 16px 30px;
            border-radius: 10px;
            cursor: pointer;
            display: inline-block;
            font-size: 16px;
            transition: background-color 0.3s ease;
            margin-bottom: 10px;
        }

        #gif-converter-container #file-label:hover {
            background-color: #b71c1c;
        }

        #gif-converter-container #file-label small {
            font-size: 12px;
            display: block;
            margin-top: 5px;
            line-height: 1.2;
        }

        #gif-converter-container #video-preview {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            display: none;
            margin: 0 auto 20px;
        }
        
        #gif-converter-container #gif-preview {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 20px auto;
            display: none;
        }

        #gif-converter-container .controls {
            margin-top: 20px;
            text-align: left;
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 400px;
            margin: 20px auto;
        }
        
        #gif-converter-container .control-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        #gif-converter-container .control-group label {
            flex-grow: 1;
            font-size: 16px;
            color: #555;
            text-align: left;
        }

        #gif-converter-container .control-group input,
        #gif-converter-container .control-group select {
            width: 150px;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ccc;
            font-family: inherit;
        }

        #gif-converter-container .buttons-group {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 10px;
        }

        #gif-converter-container .buttons-group button {
            font-family: 'Paperlogy-8ExtraBold', sans-serif;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            flex-grow: 1;
            max-width: 200px;
        }

        #gif-converter-container .buttons-group button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }
        
        #gif-converter-container #convert-btn {
            background-color: #f9a825;
        }
        #gif-converter-container #convert-btn:hover:enabled {
            background-color: #f57f17;
        }
        
        #gif-converter-container #download-btn {
            background-color: #28a745;
        }
        #gif-converter-container #download-btn:hover:enabled {
            background-color: #1e7e34;
        }

        #gif-converter-container #output {
            margin-top: 30px;
            font-size: 16px;
            color: #777;
        }
        
        #gif-converter-container .program-description {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            text-align: left;
            font-size: 15px;
            line-height: 1.6;
            color: #555;
        }

        #gif-converter-container .program-description ul {
            list-style: none !important;
            padding-left: 0;
            font-family: 'Paperlogy-8ExtraBold', 'Segoe UI', sans-serif;
        }

        #gif-converter-container .program-description ul li {
            margin-bottom: 10px;
            position: relative;
            padding-left: 0;
            font-family: 'Paperlogy-8ExtraBold', 'Segoe UI', sans-serif;
        }

        #gif-converter-container .program-description ul li .check-icon {
            color: #4CAF50;
            margin-right: 8px;
            font-size: 1.2em;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div id="gif-converter-container">
        <h1>간단한 GIF 변환기</h1>
        <h2 data-ke-size="size26">Convert your videos to GIF</h2>
        <div id="drop-zone">
            <img class="main-icon" src="https://i.postimg.cc/Qd05H1nJ/image-icon.png" alt="Video to GIF Icon" />
            <label id="file-label" for="file-input">
                동영상 파일 선택<br>Select Video files
                <small>또는 여기에 동영상 드롭 / or drop videos here</small>
            </label>
            <input type="file" id="file-input" accept="video/*">
        </div>

        <video id="video-preview" controls></video>
        <img id="gif-preview" alt="Converted GIF">

        <div class="controls">
            <div class="control-group">
                <label for="start-time">시작 시간 (초)</label>
                <input type="number" id="start-time" value="0" min="0" step="0.1" disabled>
            </div>
            <div class="control-group">
                <label for="end-time">종료 시간 (초)</label>
                <input type="number" id="end-time" value="0" min="0" step="0.1" disabled>
            </div>
            <div class="control-group">
                <label for="fps">초당 프레임 수 (FPS)</label>
                <select id="fps" disabled>
                    <option value="10">10 FPS (낮음)</option>
                    <option value="15">15 FPS (보통)</option>
                    <option value="20" selected>20 FPS (좋음)</option>
                    <option value="25">25 FPS (높음)</option>
                </select>
            </div>
        </div>

        <div class="buttons-group">
            <button id="convert-btn" disabled>변환 시작</button>
            <button id="download-btn" disabled>다운로드</button>
        </div>

        <div id="output"></div>
        
        <div class="program-description">
            <ul data-ke-list-type="disc">
                <li><span class="check-icon">✓</span> <strong>동영상 to GIF:</strong> MP4, WEBM 등 다양한 동영상 파일을 GIF로 변환합니다.</li>
                <li><span class="check-icon">✓</span> <strong>구간 및 품질 설정:</strong> 변환할 동영상의 특정 구간을 설정하고, GIF의 부드러움(FPS)을 조절할 수 있습니다.</li>
                <li><span class="check-icon">✓</span> <strong>빠르고 안전한 변환:</strong> 모든 작업이 브라우저에서 이루어져 서버로 파일이 전송되지 않습니다.</li>
                <li><span class="check-icon">✓</span> <strong>간편한 사용법:</strong> 클릭 또는 드래그 앤 드롭만으로 쉽게 GIF를 만들 수 있습니다.</li>
            </ul>
        </div>
    </div>

    <script>
    var FFmpeg;!function(e){"use strict";const t={},n=()=>{let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<12;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e};var r,o,i,s;e.createFFmpeg=(s,i,a,c)=>{const u=new Worker(URL.createObjectURL(new Blob(["var Module=void 0;self.addEventListener(\"message\",(e=>{let t=e.data;switch(t.type){case\"load\":Module={print:e=>{postMessage({type:\"stdout\",data:e})},printErr:e=>{postMessage({type:\"stderr\",data:e})},onExit:e=>{postMessage({type:\"exit\",data:e})},postRun:()=>{postMessage({type:\"done\",data:null})}},self.importScripts(t.data.path);break;case\"run\":Module.run(t.data);break;case\"writeFile\":Module.FS_createDataFile(\"/\",t.data.name,t.data.data,!0,!0);break;case\"readFile\":postMessage({type:\"readFile\",data:Module.FS.readFile(t.data,{encoding:\"binary\"})});break;case\"unlink\":Module.FS_unlink(t.data);break;case\"setLogging\":Module.logging=t.data;break;case\"getFiles\":postMessage({type:\"getFiles\",data:Module.FS.readdir(\"/\").filter((e=>[\".\",\"..\"].indexOf(e)==-1))})}}));"],{type:"application/javascript"}))),d=new Map,l={loaded:!1,on:(e,n)=>{t[e]||(t[e]=[]),t[e].push(n)},off:e=>{t[e]=[]},setLogging:e=>{"undefined"!=typeof l.worker&&l.worker.postMessage({type:"setLogging",data:e})},setLogger:e=>{t.log=[e]},load:()=>{const i=n();return l.worker.postMessage({type:"load",data:{path:s,wasm:null,mem:a,audio:null},transaction:i}),new Promise((e,t)=>{d.set(i,{resolve:e,reject:t})})},run:e=>{const r=n();return l.worker.postMessage({type:"run",data:e,transaction:r}),new Promise((e,t)=>{d.set(r,{resolve:e,reject:t})})},writeFile:(e,t)=>{const r=n();return l.worker.postMessage({type:"writeFile",data:{name:e,data:t},transaction:r}),new Promise(((e,t)=>{d.set(r,{resolve:e,reject:t})}))},readFile:e=>{const r=n();return l.worker.postMessage({type:"readFile",data:e,transaction:r}),new Promise(((e,t)=>{d.set(r,{resolve:e,reject:t})}))},unlink:e=>{const r=n();return l.worker.postMessage({type:"unlink",data:e,transaction:r}),new Promise(((e,t)=>{d.set(r,{resolve:e,reject:t})}))},getFiles:()=>{const e=n();return l.worker.postMessage({type:"getFiles",data:null,transaction:e}),new Promise(((n,r)=>{d.set(e,{resolve:n,reject:r})}))},worker:u};return u.onmessage=e=>{const n=e.data,r=d.get(n.transaction);switch(n.type){case"stdout":case"stderr":const e=t.log;e&&e.forEach((e=>e({type:n.type,message:n.data})));break;case"exit":const o=t.exit;o&&o.forEach((e=>e(n.data))),r.resolve(n.data),d.delete(n.transaction);break;case"done":case"readFile":case"getFiles":r.resolve(n.data),d.delete(n.transaction);break;case"error":l.loaded=!1,r.reject(n.data),d.delete(n.transaction);break;default:l.loaded=!0,r.resolve()}},l},e.fetchFile=async e=>fetch(e).then((e=>e.arrayBuffer()))}({}),r=FFmpeg.createFFmpeg,o=FFmpeg.fetchFile,i=r("https://unpkg.com/@ffmpeg/core@0.12.4/dist/umd/ffmpeg-core.js"),s=document;const a=s.getElementById("drop-zone"),c=s.getElementById("file-input"),u=s.getElementById("file-label"),d=s.getElementById("video-preview"),l=s.getElementById("gif-preview"),f=s.getElementById("start-time"),m=s.getElementById("end-time"),p=s.getElementById("fps"),g=s.getElementById("convert-btn"),h=s.getElementById("download-btn"),v=s.getElementById("output");let b=null;function y(e){if(!e||!e.type.startsWith("video/"))return void(v.textContent="동영상 파일만 업로드할 수 있습니다.");b=e;const t=URL.createObjectURL(b);d.src=t,d.style.display="block",l.style.display="none",a.style.display="none",u.innerHTML=`✅ ${e.name}<br>파일 선택됨`,d.onloadedmetadata=()=>{m.value=d.duration.toFixed(1),f.disabled=!1,m.disabled=!1,p.disabled=!1,g.disabled=!1,h.disabled=!0,v.textContent="아래 설정을 조절한 후 변환 시작 버튼을 누르세요."},d.onerror=()=>{v.textContent="동영상 파일을 불러오는 데 실패했습니다."}}s.addEventListener("dragover",(e=>e.preventDefault())),s.addEventListener("drop",(e=>e.preventDefault())),a.addEventListener("dragover",(e=>{e.preventDefault(),a.classList.add("dragover")})),a.addEventListener("dragleave",(()=>{a.classList.remove("dragover")})),a.addEventListener("drop",(e=>{e.preventDefault(),a.classList.remove("dragover"),y(e.dataTransfer.files[0])})),c.addEventListener("change",(e=>{y(e.target.files[0])})),g.addEventListener("click",(async()=>{if(!b)return void(v.textContent="변환할 동영상 파일을 먼저 선택해주세요.");v.textContent="변환을 시작합니다. 잠시만 기다려주세요... (페이지가 잠시 멈출 수 있습니다)",g.disabled=!0,h.disabled=!0;const e=parseFloat(f.value),t=parseFloat(m.value),n=parseInt(p.value);if(e>=t||t-e<=0)return g.disabled=!1,void(v.textContent="시작 시간이 종료 시간보다 크거나 같을 수 없습니다.");try{i.loaded||(v.textContent="변환 엔진을 로딩 중입니다...",await i.load()),v.textContent="파일을 변환기에 쓰는 중입니다...",await i.writeFile(b.name,await o(b)),v.textContent="GIF로 변환 중...",await i.run("-ss",String(e),"-to",String(t),"-i",b.name,"-vf",`fps=${n},scale=320:-1:flags=lanczos`,"output.gif");const r=await i.readFile("output.gif"),s=URL.createObjectURL(new Blob([r.buffer],{type:"image/gif"}));l.src=s,l.style.display="block",d.style.display="none",h.disabled=!1,g.disabled=!1,v.textContent="변환이 완료되었습니다! 다운로드 버튼을 눌러 저장하세요."}catch(e){console.error(e),v.textContent=`변환 중 오류가 발생했습니다: ${e.message}`,g.disabled=!1}})),h.addEventListener("click",(()=>{if(!l.src)return;const e=s.createElement("a");e.href=l.src,e.download="converted.gif",e.click()}));
    </script>
</body>
</html>
